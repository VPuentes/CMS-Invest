angular.module("inspinia").controller("Galeria",["$rootScope","$scope","$state","$http","$stateParams","SweetAlert",function(e,o,t,n,r,i){o.loading=!0,n.get("php/galeria.php").success(function(e){o.galeria=e,o.loading=!1}),o.publicar=function(e,r){if(1==r)var u="¿Esta seguro que desea publicar la imagen?";else var u="¿Esta seguro que desea remover la imagen?";i.swal({title:u,text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#559bdd",confirmButtonText:"Si",cancelButtonText:"NO",closeOnConfirm:!0,closeOnCancel:!0},function(i){i&&n({method:"POST",url:"php/galeria_publicar.php?idgaleria="+e+"&numero="+r,data:JSON.stringify(o.valores)}).success(function(e,o,n,r){t.go(t.current,{},{reload:!0})}).error(function(e,o,t,n){console.log("error al publicar la imagen")})})},o.eliminar=function(e,r){i.swal({title:"¿Esta seguro que desea eliminar la imagen?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#559bdd",confirmButtonText:"Si",cancelButtonText:"NO",closeOnConfirm:!0,closeOnCancel:!0},function(i){i&&n({method:"POST",url:"php/galeria_eliminar.php?idgaleria="+e+"&ruta="+r,data:JSON.stringify(o.valores)}).success(function(e,o,n,r){t.go(t.current,{},{reload:!0})}).error(function(e,o,t,n){console.log("error al eliminar la imagen")})})}}]).controller("GaleriaNueva",["$rootScope","$scope","$http","$stateParams","SweetAlert","$state","Upload",function(e,o,t,n,r,i,u){new Date;n.idgaleria||(o.forma={idgaleria:0,idusuario:e.datos.idusuario,activo:0,imagenes:[],rutas:[]}),o.agregar=function(){u.upload({url:"php/galeria_agregar.php",data:o.forma,method:"POST"}).then(function(e){e.data.status&&i.go("galeria.index")},function(e){console.log("Error status: "+e.status)})}}]);