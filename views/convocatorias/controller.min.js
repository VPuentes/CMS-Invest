angular.module("inspinia").controller("Convocatorias",["$rootScope","$scope","$state","$http","$stateParams","SweetAlert",function(o,t,e,a,r,n){t.loading=!0,a.get("php/convocatorias.php").success(function(o){t.convocatorias=o,t.loading=!1}),t.publicar=function(o,r){if(1==r)var i="¿Esta seguro que desea publicar la imagen?";else var i="¿Esta seguro que desea remover la imagen?";n.swal({title:i,text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#559bdd",confirmButtonText:"Si",cancelButtonText:"NO",closeOnConfirm:!0,closeOnCancel:!0},function(n){n&&a({method:"POST",url:"php/convocatoria_publicar.php?idconvocatoria="+o+"&numero="+r,data:JSON.stringify(t.valores)}).success(function(o,t,a,r){e.go(e.current,{},{reload:!0})}).error(function(o,t,e,a){console.log("error al publicar la imagen")})})},t.eliminar=function(o,r){n.swal({title:"¿Esta seguro que desea eliminar la imagen?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#559bdd",confirmButtonText:"Si",cancelButtonText:"NO",closeOnConfirm:!0,closeOnCancel:!0},function(n){n&&a({method:"POST",url:"php/convocatoria_eliminar.php?idconvocatoria="+o+"&ruta="+r,data:JSON.stringify(t.valores)}).success(function(o,t,a,r){e.go(e.current,{},{reload:!0})}).error(function(o,t,e,a){console.log("error al eliminar la imagen")})})}}]).controller("ConvocatoriasAgregar",["$rootScope","$scope","$http","$stateParams","SweetAlert","$state","Upload",function(o,t,e,a,r,n,i){new Date;a.id||(t.forma={idconvocatoria:0,idusuario:o.datos.idusuario,activo:0,imagenes:[],rutas:[]}),t.agregar=function(){i.upload({url:"php/convocatoria_agregar.php",data:t.forma,method:"POST"}).then(function(o){console.log(o.data),o.data.status&&n.go("convocatorias.index")},function(o){console.log("Error status: "+o.status)})}}]);