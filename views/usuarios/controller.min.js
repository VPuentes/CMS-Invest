angular.module("inspinia").controller("Usuarios",["$rootScope","$location","$scope","$http","$state","SweetAlert",function(e,o,t,n,r,u){t.loading=!0,n.get("php/usuarios.php").success(function(e){t.usuarios=e,t.loading=!1}),t.desactivar=function(e){u.swal({title:"Desactivar Usuario",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},function(o){o&&n.get("php/usuarios_borrar.php?id="+e).success(function(e){r.go(r.current,{},{reload:!0})})})},t.activar=function(e){u.swal({title:"Activar Usuario",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},function(o){o&&n.get("php/usuarios_activar.php?id="+e).success(function(e){r.go(r.current,{},{reload:!0})})})}}]).controller("UsuarioNuevo",["$rootScope","$scope","$location","$http","$stateParams",function(e,o,t,n,r){n.get("php/usuarios_tipos.php").success(function(e){o.tipos=e});var u="";o.errorCorreo=!1,o.errorCorreoCant=!1,r.id?(o.loading=!0,n.get("php/usuario.php?id="+r.id).success(function(e){o.forma=e,u=e.correo,o.loading=!1})):o.forma={idusuario:0,idtipo_usuario:0,nombre:"",correo:"",password:"",activo:!1},o.agregar=function(){o.loading=!0,n({method:"POST",url:"php/usuarios_agregar.php",data:JSON.stringify(o.forma)}).success(function(e,t,n,r){o.loading=!1,top.location.href="#/config/usuarios"}).error(function(e,o,t,n){console.log(o)})},o.verificarCorreo=function(){return""!=u&&o.forma.correo==u?(o.errorCorreo=!1,void(o.errorCorreoCant=!1)):o.forma.correo?(o.errorCorreoCant=!1,expr=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,expr.test(o.forma.correo)?n({method:"GET",url:"php/correo.php?correo="+o.forma.correo,data:JSON.stringify(o.forma)}).success(function(e,t,n,r){o.errorCorreo=e.correo}).error(function(e,o,t,n){console.log(o)}):o.errorCorreoCant=!0,void 0):void(o.errorCorreoCant=!0)}}]);