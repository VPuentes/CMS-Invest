angular.module("inspinia").controller("Videos",["$rootScope","$scope","$state","$http","$uibModal","$stateParams","SweetAlert",function(e,o,t,r,n,a,i){o.loading=!0,r.get("php/videos.php").success(function(e){o.videos=e,o.loading=!1}),o.obtener=function(e){o.video_principal=e},o.publicar=function(e,n,a){if(1==n)var s="¿Esta seguro que desea publicar el video?";else{if("1"==a)return void i.swal("No se puede remover el video principal","Debe seleccionar otro video como principal para poder removerlo");var s="¿Esta seguro que desea remover la publicacion del video?"}i.swal({title:s,text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#559bdd",confirmButtonText:"Si",cancelButtonText:"NO",closeOnConfirm:!0,closeOnCancel:!0},function(a){a&&r({method:"POST",url:"php/videos_publicar.php?idvideo="+e+"&numero="+n,data:JSON.stringify(o.valores)}).success(function(e,o,r,n){t.go(t.current,{},{reload:!0})}).error(function(e,o,t,r){console.log("error")})})},o.principal=function(){return void 0==o.video_principal?void i.swal({title:"Debe seleccionar un video",confirmButtonColor:"#559bdd"}):void i.swal({title:"¿Esta seguro que desea este video como el principal?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#559bdd",confirmButtonText:"Si",cancelButtonText:"NO",closeOnConfirm:!0,closeOnCancel:!0},function(e){e&&r({method:"POST",url:"php/videos_principal.php?idvideo="+o.video_principal,data:JSON.stringify(o.valores)}).success(function(e,o,r,n){t.go(t.current,{},{reload:!0})}).error(function(e,o,t,r){console.log("error ")})})}}]).controller("VideoNuevo",["$rootScope","$scope","$http","$stateParams","$uibModal","$state","toaster",function(e,o,t,r,n,a,i){function s(e){i.pop({type:"error",title:"ERROR",body:e,showCloseButton:!1,timeout:2400})}r.idvideo?(o.loading=!0,t.get("php/video.php?idvideo="+r.idvideo).success(function(e){o.forma=e,o.loading=!1})):o.forma={idvideo:0,idusuario:e.datos.idusuario,titulo:"",url:""},o.agregar=function(){var e=o.forma.url.search("facebook.com/");if(-1==e)return void s("Debe ingresar la  url de un video de Facebook");var r=o.forma.url.indexOf("&");-1!=r?o.forma.c=o.forma.url.substr(0,r):o.forma.c=o.forma.url,t({method:"POST",url:"php/videos_agregar.php",transformRequest:angular.identity,headers:{"Content-Type":void 0},data:JSON.stringify(o.forma)}).success(function(e,o,t,r){e.error?s(e.error):a.go("videos.index")}).error(function(e,o,t,r){console.log(o)})}}]);